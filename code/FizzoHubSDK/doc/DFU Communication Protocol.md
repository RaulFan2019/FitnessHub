**DFU Communication Protocol for Hub (V1.0)**
=============================================
#1. DFU Operation Flow

##1.1 Basic DFU flow as below:

Step1 : Send DFU request;

Step2 : Get bootloader information(Not necessary, You can skip this step); 

Step3 : Initiate meta data;

Step4 : Appending data of each block;

Step5 : Verify and program each block;

Step6 : Check DFU succeed or not(Read APP version.).

Notice: 

1) After appending all data of each block, then program this block.
		
2) After one block programmed, repet step4 and step5 until all blocks programmed.

## 1.2 The flow diagram as below:
![](https://i.imgur.com/vdUlMln.png)


#2. Communication Protocol

##2.1 Protocol Format
REQ

	[1-byte] [ 1-byte] [1-byte   ] [n-byte] [1-byte]
	[ SYNC ] [  LEN  ] [ CMD     ] [ DAT  ] [  XOR ]
	                   |<------LEN------->|
	|<----------------XOR---------------->|

ACK

	[1-byte] [1-byte ] [1-byte   ] [1-byte] [n-byte] [1-byte]
	[ SYNC ] [  LEN  ] [IDENTIFER] [ CMD  ] [ DAT  ] [ XOR  ]
	                   |<-----------LEN----------->|
	|<------------------XOR----------------------->|

##2.2 Protocol with Bootloader
###2.2.1 Defination
SYNC 

	#define BOOTLOADER_SYNC_REQ                   0xA4
	#define BOOTLOADER_SYNC_ACK                   0x4A


CMD

	#define BOOTLOADER_CMD_GETINFO                0x38
	#define BOOTLOADER_CMD_INITIATE               0x48
	#define BOOTLOADER_CMD_APPEND                 0x37
	#define BOOTLOADER_CMD_PROGRAM                0x39
	#define BOOTLOADER_CMD_EXIT                   0x3B
	#define BOOTLOADER_CMD_DFU_REQ                0xDF

STA (Status information)
	
	#define BOOTLOADER_RET_SUCCESS                0x00    /* success operation*/
	#define BOOTLOADER_ERR_KEY                    0x01
	#define BOOTLOADER_ERR_VERIFICATION           0x02
	#define BOOTLOADER_ERR_LENGTH                 0x03
	#define BOOTLOADER_ERR_DATA                   0x04
	#define BOOTLOADER_ERR_COMMAND                0x05
	#define BOOTLOADER_ERR_CRC                    0x08
	#define BOOTLOADER_ERR_FLASH                  0x09

###2.2.2 Specific Frame
#### DFU request
##### REQ

|SYNC|LEN |CMD |XOR |
|:--:|:--:|:--:|:--:|
|0xA4|0x01|0xDF|    |

##### ACK

|SYNC|LEN |IDENTIFER|CMD |STA |XOR |
|:--:|:--:|:-------:|:--:|:--:|:--:|
|0xA4|    |         |0xDF|    |    |

#### Get Information
##### REQ

|SYNC|LEN |CMD |XOR |
|:--:|:--:|:--:|:--:|
|0xA4|0x01|0x38|    |

##### ACK

|SYNC|LEN |IDENTIFER|CMD |DAT |XOR |
|:--:|:--:|:-------:|:--:|:--:|:--:|
|0xA4|    |         |0x38|    |    |

[DAT[0]] = Status information

[DAT[1]] = Bootloader firmware major information

[DAT[2]] = Bootloader firmware minor information

[DAT[3]] = Bootloader hardware major information

[DAT[4]] = Bootloader hardware minor information

#### Initiate Meta Data
##### REQ

|SYNC|LEN |CMD |DAT |XOR |
|:--:|:--:|:--:|:--:|:--:|
|0xA2|    |0x48|    |    |

[DAT[0]]   = lower byte of data length

[DAT[1]]   = upper byte of data length

[DAT[2]]   = first byte of meta data

......

[DAT[n-3]] = last byte of meta data

[DAT[n-2]] = lower byte of crc16 

[DAT[n-1]] = upper byte of crc16 

Notice:

1) data length calculate from DAT[2] to [DAT[n-3]]

2) crc16       calculate from DAT[0] to [DAT[n-3]]

##### ACK

|SYNC|LEN |IDENTIFER|CMD |DAT |XOR |
|:--:|:--:|:-------:|:--:|:--:|:--:|
|0xA4|    |         |0x48|    |    |

[DAT[0]] = Status information


#### Appending Data
##### REQ

|SYNC|LEN |CMD |DAT |XOR |
|:--:|:--:|:--:|:--:|:--:|
|0xA2|    |0x37|    |    |

[DAT[0]]   = lower byte of data length

[DAT[1]]   = upper byte of data length

[DAT[2]]   = first byte of each piece in one block

......

[DAT[n-3]] = last byte of each piece in one block

[DAT[n-2]] = lower byte of  crc16 

[DAT[n-1]] = upper byte of crc16 

Notice:

1) data length calculate from DAT[2] to [DAT[n-3]]

2) crc16       calculate from DAT[0] to [DAT[n-3]]

##### ACK

|SYNC|LEN |IDENTIFER|CMD |DAT |XOR |
|:--:|:--:|:-------:|:--:|:--:|:--:|
|0xA4|    |         |0x37|    |    |

[DAT[0]] = Status information


#### Program
##### REQ

|SYNC|LEN |CMD |DAT |XOR |
|:--:|:--:|:--:|:--:|:--:|
|0xA2|    |0x39|    |    |

[DAT[0]]   = lower byte of data length

[DAT[1]]   = upper byte of data length

[DAT[2]]   = arrayId

[DAT[3]]   = lower byte of rowNum

[DAT[4]]   = upper byte of rowNum

[DAT[5]]   = lower byte of rowSize

[DAT[6]]   = upper byte of rowSize

[DAT[7]]   = lower byte of  crc16 

[DAT[8]]   = upper byte of crc16 

Notice:

1) data length calculate from DAT[2] to [DAT[6]]

2) crc16       calculate from DAT[0] to [DAT[6]]

#####ACK

|SYNC|LEN |IDENTIFER|CMD |DAT |XOR |
|:--:|:--:|:-------:|:--:|:--:|:--:|
|0xA4|    |         |0x39|    |    |

[DAT[0]] = Status information

#### Exit DFU.
##### REQ

|SYNC|LEN |CMD |XOR |
|:--:|:--:|:--:|:--:|
|0xA2|    |0x3B|    |


##### ACK
|SYNC|LEN |IDENTIFER|CMD |DAT |XOR |
|:--:|:--:|:-------:|:--:|:--:|:--:|
|0xA4|    |         |0x3B|    |    |

[DAT[0]] = Status information


##2.3 Protocol with Application
###2.3.1 Defination
CMD 

	define APP_CMD_GET_INFO      0xBB
	define APP_CMD_DFU_REQ       0xDF
	define APP_CMD_RESET_MCU     0xEE


###2.3.2 Specific Frame
#### Get Information
##### REQ
|SYNC|LEN |CMD |XOR |
|:--:|:--:|:--:|:--:|
|0xA4|0x01|0xBB|    |

#####ACK
|SYNC|LEN |IDENTIFER|CMD |DAT |XOR |
|:--:|:--:|:-------:|:--:|:--:|:--:|
|0xA4|    |         |0xBB|    |    |

[DAT[0]] = Firmware major version (ex. 0x02)

[DAT[1]] = Firmware minor version (ex. 0x02)

[DAT[2]] = Lower byte of year     (ex. 2018%256)

[DAT[3]] = Upper byte of year     (ex. 2018/256)

[DAT[4]] = Month                  (ex. 5)

[DAT[5]] = Day                    (ex. 31)

[DAT[6]] = Build[0] The first character of git commit

[DAT[7]] = Build[1] 

[DAT[8]] = Build[2] 

[DAT[9]] = Build[3] 

[DAT[10]] = Build[4] 

[DAT[11]] = Build[5] 

[DAT[12]] = Build[6] 

[DAT[13]] = Build[7] The eight character of git commit

[DAT[14]] = Hardware major version (ex. 0x01)

[DAT[15]] = Hardware minor version (ex. 0x02) 

[DAT[16]] = (DEVICEID[0] & 0x000000FF) >> 0

[DAT[17]] = (DEVICEID[0] & 0x0000FF00) >> 8 

[DAT[18]] = (DEVICEID[0] & 0x00FF0000) >> 16

[DAT[19]] = (DEVICEID[0] & 0xFF000000) >> 24 

[DAT[20]] = (DEVICEID[1] & 0x000000FF) >> 0

[DAT[21]] = (DEVICEID[1] & 0x0000FF00) >> 8 
 
[DAT[22]] = (DEVICEID[1] & 0x00FF0000) >> 16

[DAT[23]] = (DEVICEID[1] & 0xFF000000) >> 24 

#### DFU Request
##### REQ
|SYNC|LEN |CMD |XOR |
|:--:|:--:|:--:|:--:|
|0xA4|    |0xDF|    |
##### NACK(Switch to bootloader and then response)

#### MCU Reset
##### REQ
|SYNC|LEN |CMD |DAT |XOR |
|:--:|:--:|:--:|:--:|:--:|
|0xA2|    |0xEE|    |    |
##### NACK

#3.	DFU File
DFU file is the processed file of hex file including meta data.But the data format is still HEX.

Here is the example of meta data row in DFU file.

	:0000761000500050000020010000A00000DCBA0000C94001000020010000B00000496BDC3CA5010203FD5A7860BBD18A93E036AEC8A9DB129943C29C296012A28034B63D49020161323066613337350000000072FCFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE6


Here is the data format of upper row.

|start symbol|arrayId|rowNum|rowSize|data[0]|...|data[n]|...|data[4095]|checksum|
|:----------:|:-----:|:----:|:-----:|:-----:|:-:|:-----:|:-:|:--------:|:------:|
|:           |00     |0076  |1000   |50     |...|...    |...|FF        |E6|
